/** 
 * jquery.jqflipswitch.js
 * @fileoverview jQuery Plugin for Flip-Switch
 *
 * Copyright 2014@Tomohiro IKEDA
 * Released under the MIT license
 */
(function(a){var l,m,n;/iPhone|iPad|iPod|Android/.test(navigator.userAgent)?(l="touchstart",m="touchmove",n="touchend"):(l="mousedown",m="mousemove",n="mouseup");var t=function(b,d){if(!a(b.target).hasClass("jq-flipper")){var c=a(b.currentTarget),h=c.children(".jq-flipper"),g=0,k="";a.isPlainObject(d.animates)&&(g=d.animates.duration,k=d.animates.easing);var e="left",f="0px";!/slow|fast/i.test(String(g))&&0>parseFloat(g)&&(g=0);c.hasClass("jq-flipper-left")?(e="right",f=parseInt(c.width()/2)+"px"):
e="left";var u=function(){if(c instanceof jQuery)switch(e){case "left":c.removeClass("jq-flipper-right").addClass("jq-flipper-left");break;case "right":c.removeClass("jq-flipper-left").addClass("jq-flipper-right");break}if(c instanceof jQuery){var a=c.children('[type="checkbox"]');0!==a.length&&(a[0].checked=!a[0].checked)}c.trigger("change",[d,e])};/slow|fast/i.test(String(g))||0<g?h.animate({left:f},g,k,u):(h.css("left",f),u())}},w=function(b,d,c){if(a.isPlainObject(b)&&"type"in b&&a.isPlainObject(d)&&
a.isFunction(d[b.type])){var h={},g=null;a.isPlainObject(d.values)&&(g=d.values[c]);h.value=g;h.state=c;d[b.type](b,h)}},x=function(b,d){a(b).on("click.jq-flipswitch",function(a){t(a,d)})},y=function(b,d){var c=a(b).children(".jq-flipper"),h=function(a,k){var e=k.parent(),f=a.pageX-e.offset().left,c=parseInt(d.width),b=parseInt(c/2);e.hasClass("jq-flipper-left")?f>b&&(f=b):(f>c&&(f=c),f-=b);0>f&&(f=0);return f};c.on(l+".jq-flipswitch",function(g){c.data("isDown",!0);a(window).data("target",c)}).on(m+
".jq-flipswitch",function(g){if(c.data("isDown")){var k="ew-resize";a.isPlainObject(d.cursors)&&(k=d.cursors.flip||"ew-resize");c.css("cursor",k).css("left",h(g,c)+"px")}});a(window).on(n+".jq-flipswitch",function(g){var c,e=a(window).data("target")||null;if(null!==e&&e.data("isDown")){var f=e.parent(),b="";c=!1;var b=d.threshold,v=parseInt(d.width)/2;g=h(g,e);e.parent().hasClass("jq-flipper-left")?g>=b?(b="right",c=!0):b="left":g<=v-b?(b="left",c=!0):b="right";g=b;b=parseInt(parseInt(d.width)/2)+
"px";switch(g){case "left":f.removeClass("jq-flipper-right").addClass("jq-flipper-left");e.css("left","0px");break;case "right":f.removeClass("jq-flipper-left").addClass("jq-flipper-right"),e.css("left",b)}c&&f.trigger("change",[d,g]);e.removeData("isDown");a(window).removeData("target")}})};a.fn.flipswitch=function(b){var d=this,c={create:function(b){c.destroy();d.flipswitch.settings=a.extend(!0,{},d.flipswitch.defaults,b);return d.each(function(b,c){var e=a(c).flipswitch.settings,f;a:if(a.isPlainObject(e)){f=
null;if(c instanceof HTMLInputElement&&"checkbox"===c.getAttribute("type"))f=a("<div />"),a(c).hide().before(f).appendTo(f);else if(!(c instanceof HTMLInputElement)&&c instanceof HTMLElement)f=a(c);else{f=null;break a}var d="",h="";a.isPlainObject(e.texts)&&(d=e.texts.left||"ON",h=e.texts.right||"OFF");var p="pointer";if(a.isPlainObject(e.cursors))switch(e.type){case "click":p=e.cursors.normal||"pointer";break;case "flip":p=e.cursors.flip||"pointer"}var l=a('<div class="jq-flipper"></div>'),m=a("<div />"),
d=a('<div class="jq-flipswitch-text-left"></div>').text(d),h=a('<div class="jq-flipswitch-text-right"></div>').text(h),q=parseInt(parseInt(e.width)/2)+"px",r=parseInt(e.height)+"px",n="left"===e.init?"jq-flipper-left":"jq-flipper-right",t="left"===e.init?"0px":q;f.css({cursor:p,position:"relative",top:"0px",left:"0px","z-index":1,width:parseInt(e.width)+"px",height:r});l.css({cursor:p,position:"absolute",top:"0px",left:t,"z-index":3,width:q,height:r});d.css({position:"absolute",top:"0px",left:"0px",
"z-index":2,width:q,"line-height":r,"text-align":"center"});h.css({position:"absolute",top:"0px",right:"0px","z-index":2,width:q,"line-height":r,"text-align":"center"});m.append(d).append(h);f.addClass("jq-flipswitch "+n).append(l).append(m);f=f[0]}else f=void 0;a(f).off(".jq-flipswitch");a(f).on("change.jq-flipswitch",w);switch(e.type){case "click":x(f,e);break;case "flip":y(f,e)}})},option:function(a,b){if(void 0===b)return d.flipswitch.settings[a];d.flipswitch.settings[a]=b;return c.create(d.flipswitch.settings)},
destroy:function(){d.flipswitch.settings={};return d.each(function(c,b){var d=null;b instanceof HTMLInputElement&&"checkbox"===b.getAttribute("type")?(d=a(b).parent(),a(b).show().insertBefore(d),d.remove()):(d=a(b),d.removeClass("jq-flipswitch jq-flipper-left jq-flipper-right").empty())})}};if(c[String(b)])return c[String(b)].apply(this,Array.prototype.slice.call(arguments,1));if(a.isPlainObject(b)||void 0===b)return c.create(b);a.error('jquery.jqflipswitch.js : The designated method ("'+b+'") is not defined.')};
a.fn.flipswitch.defaults={type:"click",width:200,height:50,init:"left",threshold:50,cursors:{normal:"pointer",flip:"ew-resize"},values:{left:!1,right:!0},texts:{left:"ON",right:"OFF"},animates:{duration:"fast",easing:"swing"},change:function(a,d){}};a.fn.flipswitch.settings={}})(jQuery);