/** 
 * jquery.jqflipswitch.js
 * @fileoverview jQuery Plugin for Flip-Switch
 *
 * Copyright 2014@Tomohiro IKEDA
 * Released under the MIT license
 */
(function(a){var l,m,n;/iPhone|iPad|iPod|Android/.test(navigator.userAgent)?(l="touchstart",m="touchmove",n="touchend"):(l="mousedown",m="mousemove",n="mouseup");var t=function(c,b){if(!a(c.target).hasClass("jq-flipper")){var d=a(c.currentTarget),g=d.children(".jq-flipper"),h=0,f="";a.isPlainObject(b.animates)&&(h=b.animates.duration,f=b.animates.easing);var k="left",e="0px";!/slow|fast/i.test(String(h))&&0>parseFloat(h)&&(h=0);d.hasClass("jq-flipper-left")?(k="right",e=parseInt(d.width()/2)+"px"):
k="left";var u=function(){if(d instanceof jQuery)switch(k){case "left":d.removeClass("jq-flipper-right").addClass("jq-flipper-left");break;case "right":d.removeClass("jq-flipper-left").addClass("jq-flipper-right");break}if(d instanceof jQuery){var a=d.children('[type="checkbox"]');0!==a.length&&(a[0].checked=!a[0].checked)}d.trigger("change",[b,k])};/slow|fast/i.test(String(h))||0<h?g.animate({left:e},h,f,u):(g.css("left",e),u())}},v=function(c,b,d){if(a.isPlainObject(c)&&"type"in c&&a.isPlainObject(b)&&
a.isFunction(b[c.type])){var g={},h=null;a.isPlainObject(b.values)&&(h=b.values[d]);g.value=h;g.state=d;b[c.type](c,g)}},w=function(c,b){a(c).on("click.jq-flipswitch",function(a){t(a,b)})},x=function(c,b){var d=a(c).children(".jq-flipper"),g=function(a,f){var k=f.parent(),e=a.pageX-k.offset().left,d=parseInt(b.width),c=parseInt(d/2);k.hasClass("jq-flipper-left")?e>c&&(e=c):(e>d&&(e=d),e-=c);0>e&&(e=0);return e};d.on(l+".jq-flipswitch",function(b){d.data("isDown",!0);a(window).data("target",d)}).on(m+
".jq-flipswitch",function(h){if(d.data("isDown")){var f="ew-resize";a.isPlainObject(b.cursors)&&(f=b.cursors.flip||"ew-resize");d.css("cursor",f).css("left",g(h,d)+"px")}});a(window).on(n+".jq-flipswitch",function(d){var f=a(window).data("target")||null;if(null!==f&&f.data("isDown")){var k=parseInt(parseInt(b.width)/2)+"px",e="",e=b.threshold,c=parseInt(b.width)/2;d=g(d,f);e=f.parent().hasClass("jq-flipper-left")?d>=e?"right":"left":d<=c-e?"left":"right";switch(e){case "left":f.parent().removeClass("jq-flipper-right").addClass("jq-flipper-left");
f.css("left","0px");break;case "right":f.parent().removeClass("jq-flipper-left").addClass("jq-flipper-right"),f.css("left",k)}f.removeData("isDown");a(window).removeData("target")}})};a.fn.flipswitch=function(c){var b=this,d={create:function(c){d.destroy();b.flipswitch.settings=a.extend(!0,{},b.flipswitch.defaults,c);return b.each(function(d,f){var b=a(f).flipswitch.settings,e;a:if(a.isPlainObject(b)){e=null;if(f instanceof HTMLInputElement&&"checkbox"===f.getAttribute("type"))e=a("<div />"),a(f).hide().before(e).appendTo(e);
else if(!(f instanceof HTMLInputElement)&&f instanceof HTMLElement)e=a(f);else{e=null;break a}var c="",g="";a.isPlainObject(b.texts)&&(c=b.texts.left||"ON",g=b.texts.right||"OFF");var p="pointer";if(a.isPlainObject(b.cursors))switch(b.type){case "click":p=b.cursors.normal||"pointer";break;case "flip":p=b.cursors.flip||"pointer"}var l=a('<div class="jq-flipper"></div>'),m=a("<div />"),c=a('<div class="jq-flipswitch-text-left"></div>').text(c),g=a('<div class="jq-flipswitch-text-right"></div>').text(g),
q=parseInt(parseInt(b.width)/2)+"px",r=parseInt(b.height)+"px",n="left"===b.init?"jq-flipper-left":"jq-flipper-right",t="left"===b.init?"0px":q;e.css({cursor:p,position:"relative",top:"0px",left:"0px","z-index":1,width:parseInt(b.width)+"px",height:r});l.css({cursor:p,position:"absolute",top:"0px",left:t,"z-index":3,width:q,height:r});c.css({position:"absolute",top:"0px",left:"0px","z-index":2,width:q,"line-height":r,"text-align":"center"});g.css({position:"absolute",top:"0px",right:"0px","z-index":2,
width:q,"line-height":r,"text-align":"center"});m.append(c).append(g);e.addClass("jq-flipswitch "+n).append(l).append(m);e=e[0]}else e=void 0;a(e).off(".jq-flipswitch");a(e).on("change.jq-flipswitch",v);switch(b.type){case "click":w(e,b);break;case "flip":x(e,b)}})},option:function(a,c){if(void 0===c)return b.flipswitch.settings[a];b.flipswitch.settings[a]=c;return d.create(b.flipswitch.settings)},destroy:function(){b.flipswitch.settings={};return b.each(function(b,c){var d=null;c instanceof HTMLInputElement&&
"checkbox"===c.getAttribute("type")?(d=a(c).parent(),a(c).show().insertBefore(d),d.remove()):(d=a(c),d.removeClass("jq-flipswitch jq-flipper-left jq-flipper-right").empty())})}};if(d[String(c)])return d[String(c)].apply(this,Array.prototype.slice.call(arguments,1));if(a.isPlainObject(c)||void 0===c)return d.create(c);a.error('jquery.jqflipswitch.js : The designated method ("'+c+'") is not defined.')};a.fn.flipswitch.defaults={type:"click",width:200,height:50,init:"left",threshold:50,cursors:{normal:"pointer",
flip:"ew-resize"},values:{left:!1,right:!0},texts:{left:"ON",right:"OFF"},animates:{duration:"fast",easing:"swing"},change:function(a,b){}};a.fn.flipswitch.settings={}})(jQuery);