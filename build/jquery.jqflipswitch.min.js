/** 
 * jquery.jqflipswitch.js
 * @fileoverview jQuery Plugin for Flip-Switch
 *
 * Copyright 2014@Tomohiro IKEDA
 * Released under the MIT license
 */
(function(a){var l,m,p;/iPhone|iPad|iPod|Android/.test(navigator.userAgent)?(l="touchstart",m="touchmove",p="touchend"):(l="mousedown",m="mousemove",p="mouseup");var q=function(d,b,c){if(a.isPlainObject(d)&&"type"in d&&a.isPlainObject(b)&&a.isFunction(b[d.type])){var f={},g=null;a.isPlainObject(b.values)&&(g=b.values[c]);f.value=g;f.state=c;b[d.type](d,f)}},w=function(d,b){if(!a(d.target).hasClass("jq-flipper")){var c=a(d.currentTarget),f=c.children(".jq-flipper"),g=0,k="";a.isPlainObject(b.animates)&&
(g=b.animates.duration,k=b.animates.easing);var h="left",e="0px";!/slow|fast/i.test(String(g))&&0>parseFloat(g)&&(g=0);c.hasClass("jq-flipper-left")?(h="right",e=parseInt(c.width()/2)+"px"):h="left";var v=function(){if(c instanceof jQuery)switch(h){case "left":c.removeClass("jq-flipper-right").addClass("jq-flipper-left");break;case "right":c.removeClass("jq-flipper-left").addClass("jq-flipper-right");break}if(c instanceof jQuery){var a=c.children('[type="checkbox"]');0!==a.length&&(a[0].checked=!a[0].checked)}c.trigger("change",
[b,h])};/slow|fast/i.test(String(g))||0<g?f.animate({left:e},g,k,v):(f.css("left",e),v())}},x=function(a,b,c){q(a,b,c)},y=function(a,b,c){q(a,b,c)},z=function(a,b){q(a,b)},A=function(d,b){a(d).on("click.jq-flipswitch",function(a){w(a,b)})},B=function(d,b){var c=a(d),f=c.children(".jq-flipper"),g=function(a,h){var e=h.parent(),c=a.pageX-e.offset().left,g=parseInt(b.width),d=parseInt(g/2);e.hasClass("jq-flipper-left")?c>d&&(c=d):(c>g&&(c=g),c-=d);0>c&&(c=0);return c};c.on("flipstart.jq-flipswitch",
y);c.on("flip.jq-flipswitch",z);f.on(l+".jq-flipswitch",function(k){k="";k=c.hasClass("jq-flipper-left")?"left":"right";c.trigger("flipstart",[b,k]);f.data("isDown",!0);a(window).data("target",f)}).on(m+".jq-flipswitch",function(k){if(f.data("isDown")){var h="ew-resize";a.isPlainObject(b.cursors)&&(h=b.cursors.flip||"ew-resize");f.css("cursor",h).css("left",g(k,f)+"px");c.trigger("flip",[b])}});a(window).on(p+".jq-flipswitch",function(c){var h,e=a(window).data("target")||null;if(null!==e&&e.data("isDown")){var d=
e.parent(),f="";h=!1;var f=b.threshold,n=parseInt(b.width)/2;c=g(c,e);e.parent().hasClass("jq-flipper-left")?c>=f?(f="right",h=!0):f="left":c<=n-f?(f="left",h=!0):f="right";c=f;f=parseInt(parseInt(b.width)/2)+"px";switch(c){case "left":d.removeClass("jq-flipper-right").addClass("jq-flipper-left");e.css("left","0px");break;case "right":d.removeClass("jq-flipper-left").addClass("jq-flipper-right"),e.css("left",f)}h&&d.trigger("change",[b,c]);e.removeData("isDown");a(window).removeData("target")}})};
a.fn.flipswitch=function(d){var b=this,c={create:function(d){c.destroy();b.flipswitch.settings=a.extend(!0,{},b.flipswitch.defaults,d);return b.each(function(c,b){var d=a(b).flipswitch.settings,e;a:if(a.isPlainObject(d)){e=null;if(b instanceof HTMLInputElement&&"checkbox"===b.getAttribute("type"))e=a("<div />"),a(b).hide().before(e).appendTo(e);else if(!(b instanceof HTMLInputElement)&&b instanceof HTMLElement)e=a(b);else{e=null;break a}var f="",r="";a.isPlainObject(d.texts)&&(f=d.texts.left||"ON",
r=d.texts.right||"OFF");var n="pointer";if(a.isPlainObject(d.cursors))switch(d.type){case "click":n=d.cursors.normal||"pointer";break;case "flip":n=d.cursors.flip||"pointer"}var l=a('<div class="jq-flipper"></div>'),m=a("<div />"),f=a('<div class="jq-flipswitch-text-left"></div>').text(f),r=a('<div class="jq-flipswitch-text-right"></div>').text(r),t=parseInt(parseInt(d.width)/2)+"px",u=parseInt(d.height)+"px",p="left"===d.init?"jq-flipper-left":"jq-flipper-right",q="left"===d.init?"0px":t;e.css({cursor:n,
position:"relative",top:"0px",left:"0px","z-index":1,width:parseInt(d.width)+"px",height:u});l.css({cursor:n,position:"absolute",top:"0px",left:q,"z-index":3,width:t,height:u});f.css({position:"absolute",top:"0px",left:"0px","z-index":2,width:t,"line-height":u,"text-align":"center"});r.css({position:"absolute",top:"0px",right:"0px","z-index":2,width:t,"line-height":u,"text-align":"center"});m.append(f).append(r);e.addClass("jq-flipswitch "+p).append(l).append(m);e=e[0]}else e=void 0;a(e).off(".jq-flipswitch");
a(e).on("change.jq-flipswitch",x);switch(d.type){case "click":A(e,d);break;case "flip":B(e,d)}})},option:function(a,d){if(void 0===d)return b.flipswitch.settings[a];b.flipswitch.settings[a]=d;return c.create(b.flipswitch.settings)},destroy:function(){b.flipswitch.settings={};return b.each(function(d,b){var c=null;b instanceof HTMLInputElement&&"checkbox"===b.getAttribute("type")?(c=a(b).parent(),a(b).show().insertBefore(c),c.remove()):(c=a(b),c.removeClass("jq-flipswitch jq-flipper-left jq-flipper-right").empty())})}};
if(c[String(d)])return c[String(d)].apply(this,Array.prototype.slice.call(arguments,1));if(a.isPlainObject(d)||void 0===d)return c.create(d);a.error('jquery.jqflipswitch.js : The designated method ("'+d+'") is not defined.')};a.fn.flipswitch.defaults={type:"click",width:200,height:50,init:"left",threshold:50,cursors:{normal:"pointer",flip:"ew-resize"},values:{left:!1,right:!0},texts:{left:"ON",right:"OFF"},animates:{duration:"fast",easing:"swing"},change:function(a,b){},flipstart:function(a,b){},
flip:function(a,b){}};a.fn.flipswitch.settings={}})(jQuery);